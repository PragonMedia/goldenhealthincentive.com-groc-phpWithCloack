<!DOCTYPE html>
<html lang="en_US">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Benefit Help Journal</title>
    <link rel="shortcut icon" href="data:" type="image/x-icon" />

    <script>
      (async () => {
        // helpers
        function pushParams(params) {
          const u = new URL(location.href);
          for (const [k, v] of Object.entries(params)) {
            if (v != null && v !== "") u.searchParams.set(k, v);
          }
          history.replaceState({}, "", u.toString());
        }

        // fire both requests in parallel
        const zipReq = fetch("./zip.php", { credentials: "include" })
          .then((r) => (r.ok ? r.json() : Promise.reject(r.status)))
          .catch(() => null);

        const clickReq = fetch("./clickid.php", {
          method: "POST",
          credentials: "include",
        })
          .then((r) => (r.ok ? r.json() : Promise.reject(r.status)))
          .catch(() => null);

        const [zipRes, clickRes] = await Promise.all([zipReq, clickReq]);

        const updates = {};

        // ZIP
        if (zipRes && zipRes.success && zipRes.zip) {
          updates.caller_zip = zipRes.zip;
        }

        // clickid
        console.log("ClickID Response:", clickRes);
        if (clickRes && clickRes.ok && clickRes.clickid) {
          localStorage.setItem("rt_clickid", clickRes.clickid);
          updates.clickid = clickRes.clickid;
          console.log("ClickID added to URL:", clickRes.clickid);
        } else {
          console.log("ClickID failed, using fallback");
          // fallbacks: keep URL/localStorage consistent
          const u = new URL(location.href);
          const fromUrl = u.searchParams.get("clickid");
          const fromLS = localStorage.getItem("rt_clickid");
          if (fromUrl && !fromLS) localStorage.setItem("rt_clickid", fromUrl);
          if (!fromUrl && fromLS) updates.clickid = fromLS;
        }

        // apply all URL changes once
        if (Object.keys(updates).length) pushParams(updates);
      })();

      // Set dynamic domain name
      document.addEventListener("DOMContentLoaded", function () {
        const domainElement = document.getElementById("domain-name");
        if (domainElement) {
          const currentDomain = window.location.hostname.toUpperCase();
          domainElement.textContent = currentDomain;
        }
      });
    </script>

    <link rel="stylesheet" href="./css/app.css" />
  </head>

  <body>
    <!-- Logo and Domain Header -->
    <div
      class="w-full px-4 py-4 border-b border-gray-200 bg-[#d1d5dc]"
      style="background-color: #d1d5dc"
    >
      <div class="flex items-center justify-center space-x-3">
        <div class="flex items-center justify-center space-x-3">
          <div
            class="w-12 h-12 bg-gray-300 rounded-lg flex items-center justify-center"
          >
            <img src="./images/logo.png" alt="" class="" />
          </div>
          <span class="text-black font-semibold text-lg" id="domain-name"
            >BENEFITHELPJOURNAL.COM</span
          >
        </div>
      </div>
    </div>

    <!-- Hero Section -->
    <header class="container py-4 text-center">
      <div class="hero-title-container">
        <h1 class="hero-title">
          Americans on Medicare May Be Eligible For a Grocery Allowance!
        </h1>
      </div>
      <div class="my-4">
        <p class="hero-subtitle">Answer the question below to get started!</p>
      </div>
    </header>

    <!-- Progress Bar -->
    <section class="container mx-auto" style="max-width: 800px">
      <div class="d-flex align-items-center gap-3 mb-2">
        <div id="progressLabel" class="fw-semibold">0% Complete</div>
        <meter
          id="flowMeter"
          min="0"
          max="100"
          value="0"
          class="hidden"
        ></meter>
      </div>
      <div class="progress">
        <div
          id="bar"
          class="progress-bar"
          role="progressbar"
          aria-valuemin="0"
          aria-valuemax="100"
          style="width: 0%"
        ></div>
      </div>
    </section>

    <!-- Multi-Step Form -->
    <main class="container flow py-4">
      <!-- Step 1: Age Selection -->
      <section id="stage-age" class="ux-stage is-visible" role="region">
        <div class="form-container">
          <h2 class="question-title">What is your age?</h2>
          <div class="button-grid">
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-medicare"
              data-form-step="2"
              data-form-value="below 65"
            >
              Under 65
            </button>
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-medicare"
              data-form-step="2"
              data-form-value="65 - 70"
            >
              65 - 70
            </button>
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-medicare"
              data-form-step="2"
              data-form-value="71 - 75"
            >
              71 - 75
            </button>
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-medicare"
              data-form-step="2"
              data-form-value="76 and older"
            >
              Over 75
            </button>
          </div>
        </div>
      </section>

      <!-- Step 2: Medicare A&B Question -->
      <section id="stage-medicare" class="ux-stage" role="region">
        <div class="form-container">
          <h2 class="question-title">Are you on Medicare Part A and Part B?</h2>
          <div class="button-grid">
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-insurance"
              data-form-step="3"
              data-form-value="Yes"
            >
              Yes
            </button>
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-insurance"
              data-form-step="3"
              data-form-value="No"
            >
              No
            </button>
          </div>
        </div>
      </section>

      <!-- Step 3: Insurance Question (only for under 65) -->
      <section id="stage-insurance" class="ux-stage" role="region">
        <div class="form-container">
          <h2 class="question-title">
            Do you have insurance through your job or a government program like
            VA or Medicaid?
          </h2>
          <div class="button-grid">
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-result"
              data-form-step="4"
              data-form-value="Yes"
            >
              Yes
            </button>
            <button
              class="btn btn-lg btn-primary-alt"
              data-goto="stage-result"
              data-form-step="4"
              data-form-value="No"
            >
              No
            </button>
          </div>
        </div>
      </section>

      <!-- Step 4: Results -->
      <section id="stage-result" class="ux-stage" role="region">
        <!-- Qualified Result -->
        <div
          id="qualified-section"
          class="qualified-section"
          style="display: none"
        >
          <p class="mb-3" style="font-size: 1.25rem; font-weight: bold">
            <span class="qualified-title"
              >Great News, You May Be Eligible!</span
            >
            Speak with a licensed insurance agent to find out if you qualify.
          </p>

          <p class="text-center">
            <a
              id="phone-number"
              href="tel:+18664982822"
              onclick="fbq('track', 'Lead');"
              class="cta-dial"
            >
              +18664982822
            </a>
          </p>
          <p class="countdown-text">
            <!-- Your call is reserved for <span id="countdown">00:30</span> -->
          </p>
          <p class="last-chance-text">
            Last chance to get your spot, Call Now!
          </p>
        </div>

        <!-- Disqualified Result -->
        <div
          id="disqualified-section"
          class="disqualified-section"
          style="display: none"
        >
          <h2 class="disqualified-title">
            Sorry, it seems like you don't qualify for this offer
          </h2>
        </div>
      </section>
    </main>

    <footer class="bg-gray-100 border-t border-t-1 border-t-gray-200 mt-8">
      <div
        class="mx-auto max-w-7xl overflow-hidden px-6 py-8 lg:px-8 text-sm sm:text-md leading-5 sm:leading-6 text-gray-500"
      >
        <p style="text-align: center; margin-top: 15px">
          The offers mentioned or displayed on our site come from third-party
          advertisers who compensate us. We are a marketing company, and this
          website is part of our marketing activities for third-party
          businesses. This compensation may influence how products are presented
          on our website, including their placement and order. Additionally, it
          may affect the topics, posts, and content featured on our site. We do
          not cover all services or products available in the market. The
          editorial opinions shared here are solely our own and are not
          influenced, approved, or provided by advertisers. Other than as
          disclosed, we are not affiliated with any third-party advertisers.
          Therefore, we do not endorse or recommend any specific product or
          service featured on this website. If you are redirected to a
          third-party site, please review their terms, conditions, and privacy
          policies, as they may differ significantly from ours.
        </p>
        <div class="footer-links-container">
          <p class="text-center text-blue-400">
            <span>
              <a id="privacyLink" href="./privacy.php" target="_blank"
                >Privacy Policy</a
              >
              |
              <a id="termsLink" href="./terms.php" target="_blank"
                >Terms &amp; Conditions</a
              >
            </span>
          </p>
          <p>@2025. All rights Reserved.</p>
        </div>
      </div>
    </footer>

    <!-- jQuery CDN -->
    <script src="./js/jquery-3.7.1.min.js"></script>
    <script src="./js/app.js"></script>
  </body>
</html>
